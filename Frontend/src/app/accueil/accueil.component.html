
<div class="h-screen flex flex-col max-w-screen-xl">
  <app-navbar (openAssistantModal)="openModalIA()"></app-navbar>

  <div class="flex flex-1 bg-stone-50 mt-16">
    <app-sidebar></app-sidebar>

    <!-- Main Content -->
    <div class="fixed flex-1 grid grid-cols-3 gap-4 p-4 ml-64">
      <!-- Post Section (Middle Column) -->
      <div class="col-span-2 space-y-4">

       <app-addpost></app-addpost>


<!-- test posts boucle -->

<div class="h-96 overflow-y-scroll  bg-stone-50" style="scrollbar-width: none; -ms-overflow-style: none;">
  <div *ngFor="let post of postslist" class=" mb-10 bg-white p-5 rounded pb-5">
    <!-- Post header: name, date, save option -->
    <div class="flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <img src="../../assets/sirineKahweji_ISETBizerte.jpg" class="w-8 h-8 rounded-full">
        <div>
          <h3 class="font-semibold">{{ post.user.name }}</h3>
          <p class="text-gray-500 text-sm">{{ post.date }}</p>
        </div>
      </div>
      <div class="flex items-center space-x-1 text-gray-600 cursor-pointer text-sm">
        <p class="text-black">Enregistrer la publication</p>
        <i class="bi bi-bookmark-fill text-gray-400"></i>
      </div>
    </div>

    <!-- Post content -->
    <div class="pb-5">
      <p class="pt-2">{{ post.description }}</p>

      <!-- Post details (toggle visibility) -->
      <div *ngIf="showDetails">
        <p><strong>Prix:</strong> {{ post.price }}</p>
        <p><strong>Localisation:</strong> {{ post.localisation }}</p>
        <p><strong>Superficie:</strong> {{ post.air }}</p>
        <p><strong>Défauts:</strong> {{ post.defaut }}</p>
        <app-map class=" w-32 h-32"></app-map>
      </div>
      <p class="text-right font-bold underline cursor-pointer" (click)="toggleDetails()">
        {{ showDetails ? 'Voir moins' : 'Voir plus' }}
      </p>
    </div>

    <!-- Post image -->
    <div>
      <img [src]="post.image">
    </div>

    <!-- Likes and Comments -->
    <div class="flex justify-between">
      <div class="flex">
        <img class="w-9 h-9" src="../../assets/accueil/like.png">
        <img class="w-7 h-7 mt-1 -ml-3" src="data:image/png;base64,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" alt="love-circled">
        <p class="mt-1 pl-1 text-gray-400">36</p>
      </div>
      <div class="flex text-gray-400 text-right mr-5" (click)="openModal()">
        <p class="text-right" >16</p>
        <i class="bi bi-chat-fill text-right pl-2" ></i>
      </div>
    </div>

    <!-- Like and comment input -->
    <div class="flex items-center space-x-2 -mt-1">
      <div class="relative group">

        <!-- Icône de "like" -->
        <img src="../../assets/accueil/alike.png" class="w-7 h-7" alt="Like" />

        <!-- Options de réactions qui apparaissent au survol de l'icône "like" -->
        <div class="absolute hidden group-hover:flex bg-white border rounded-lg shadow-lg space-x-2 p-2 -top-8 -left-3 z-10 w-72">
          <img src="../../assets/accueil/like.gif" class="w-7 h-7 cursor-pointer" alt="Love">
          <img src="../../assets/accueil/ballheart.gif" class="w-7 h-7 cursor-pointer" alt="Haha">
          <img src="../../assets/accueil/care-love1.gif" class="w-8 h-8 -mt-1 cursor-pointer" alt="Angry">
          <img src="../../assets/accueil/laugh.gif" class="w-7 h-7 cursor-pointer" alt="Laugh">
          <img src="../../assets/accueil/wow.gif" class="w-7 h-7 cursor-pointer" alt="Wow">
          <img src="../../assets/accueil/sad.gif" class="w-7 h-7 cursor-pointer" alt="Sad">
          <img src="../../assets/accueil/angry.gif" class="w-7 h-7 cursor-pointer" alt="Angry">
        </div>
      </div>      <div class="flex justify-center items-center border rounded-full p-1 mt-2 bg-gray-100 flex-grow h-9">
        <img src="../../assets/sirineKahweji_ISETBizerte.jpg" class="rounded-full w-8 h-8">
        <input type="text" placeholder="Écrire un commentaire..." class="bg-gray-100 pl-3 flex-grow focus:outline-none">
      </div>
    </div>
  </div>
</div>

<!-- fin test boucle -->
</div>

<!-- Events section -->

<div class="bg-white p-4 rounded shadow">

  <h3 class="font-semibold text-gray-700 mb-4">Les Nouvelles Événements</h3>

  <div class="h-96 overflow-y-scroll" style="scrollbar-width: none; -ms-overflow-style: none;">

    <div *ngFor="let event of events" class="space-y-4">
      <div class="flex items-center m-1">
        <img
          [src]="event.image"
          alt="Event"
          class="w-20 rounded object-contain"
        />
        <div class="ml-4 w-full">
          <p class="text-sm font-semibold">{{ event.title }}</p>
          <p class="text-xs text-gray-500">{{ event.price }}</p>
          <div class="flex items-center">
            <button class="text-xs text-green-600 font-bold">Participer</button>
            <p class="font-bold underline text-xs ml-auto cursor-pointer" (click)="openModalDetailsEvent(event.id)">voir plus</p>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>



<!-- modal commentaires-->
<div
  *ngIf="isModalOpen"
  class="fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50"
>
  <div class="bg-white rounded-lg shadow-lg w-96 h-[460px] flex flex-col">

    <div class="px-6 py-4 flex items-center justify-between border-b">
      <h5 class="text-lg font-semibold">Liste des Commentaires</h5>
      <button (click)="closeModal()" class="text-gray-600 hover:text-gray-900">
        <span class="text-xl">&times;</span>
      </button>
    </div>

    <div
      class="flex-1 overflow-y-scroll px-6 py-4"
      style="scrollbar-width: none; -ms-overflow-style: none;"
    >
      <div *ngFor="let comment of comments" class="flex items-center gap-4 mb-4">
        <img [src]="comment.userImage" alt="User" class="w-10 h-10 rounded-full" />
        <div class="flex-1">
          <h6 class="text-xs">{{ comment.userName }}</h6>
          <p class="text-sm text-black font-bold">{{ comment.content }}</p>
        </div>
        <p class="text-xs text-gray-500 ml-auto">{{ comment.date }}</p>
      </div>
    </div>
  </div>
</div>


<!-- modal details events-->
<!-- Modal pour les détails de l'événement -->
<div *ngIf="isModalOpenDetailsEvent" class="fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50">
  <div class="bg-white rounded-lg shadow-lg w-[640px] h-[460px] flex">
    <!-- Liste des participants -->
    <div class="w-1/3 bg-gray-100 p-4 border-r">
      <h5 class="text-lg font-semibold mb-4">Participants</h5>
      <ul class="space-y-2">
        <li *ngFor="let participant of comments" class="text-sm text-gray-700 flex items-center space-x-2">
          <img [src]="participant.userImage" alt="Avatar" class="w-8 h-8 rounded-full">
          <span>{{ participant.userName }}</span>
        </li>
      </ul>
    </div>

    <!-- Détails de l'événement -->
    <div class="flex-1 flex flex-col">
      <!-- En-tête -->
      <div class="px-6 py-4 flex items-center justify-between border-b">
        <h5 class="text-lg font-semibold">Détails de l'événement</h5>
        <button (click)="closeModalDetailsEvent()" class="text-gray-600 hover:text-gray-900">
          <span class="text-xl">&times;</span>
        </button>
      </div>

      <!-- Contenu principal -->
      <div class="px-6 py-4 flex-1 overflow-y-auto">
        <!-- Description -->
        <div class="mb-4">
          <h6 class="text-lg font-semibold mb-2">Description :</h6>
          <p class="text-gray-600 text-sm">{{ eventDetails.description }}</p>
        </div>

        <!-- Prix -->
        <div class="mb-4">
          <h6 class="font-medium text-gray-800">Prix :</h6>
          <p class="text-gray-600">{{ eventDetails.price }}</p>
        </div>

        <!-- Image -->
        <div>
          <h6 class="font-medium text-gray-800 mb-2">Image :</h6>
          <img [src]="eventDetails.image" alt="Event Image" class="w-full h-32 object-cover rounded-lg">
        </div>
      </div>

      <div class="modal-footer mt-4 flex justify-end mr-11 mb-5">
        <button type="submit" class="bg-yellow-500 text-white py-2 px-4 rounded-lg">Participer</button>
      </div>

    </div>
  </div>
</div>


<!-- Modal assistant IA -->
<div
  *ngIf="isModalOpenIA"
  class="fixed bottom-0 right-0 bg-white rounded-lg shadow-lg w-full max-w-md p-6 z-[9999] border border-gray-300"
>
  <button
    (click)="closeModalIA()"
    class="absolute top-2 right-2 text-gray-500 hover:text-red-600 text-xl font-bold"
  >
    ✕
  </button>
  <div class="flex items-center">
    <img src="../../assets/accueil/IALogo.jpg" class="w-11 h-11 -mt-4 rounded-full border-2 border-lime-100" alt="FarmFinderIA logo">
    <h2 class="text-lg font-bold mb-4 ml-2">FarmFinderIA</h2>
  </div>
  <hr>

  <div class="flex flex-col items-center mt-24 mb-24">
    <img
      src="../../assets/accueil/IALogo.jpg"
      class="w-28 h-28 mb-4 rounded-full border-2 border-black animate-pulse"
      alt="FarmFinderIA logo"
    />
    <p class="text-sm text-black font-bold text-center mb-4">What can I help with?</p>
  </div>
  <div>

  </div>
  <div class="bg-gray-100 rounded flex justify-between">
    <input type="text" placeholder="" class="bg-gray-100 pl-3 flex-grow focus:outline-none">
    <i class="bi bi-arrow-up-circle-fill cursor-pointer"></i>

  </div>


</div>







<router-outlet></router-outlet>

